---
title: "Component Inventory"
description: "Canonical list of every shared component, its purpose, props, and which pages use it."
---

## Layout Components

### TextField

`src/components/TextField.tsx`

Click-to-edit text field with full styling control via Tailwind utility props. Replaces the former `PageTitle` and `InlineText` components. Renders static text that becomes an `<input>` (or `<textarea>` when `multiline`) on click. Enter/blur saves, Escape cancels.

**Page title usage:**
```tsx
<TextField value={title} onChange={setTitle} size="text-[1.5rem]" weight="font-semibold" leading="leading-[2rem]" tracking="tracking-[-0.16px]" as="h1" />
```

**Description/summary usage:**
```tsx
<TextField value={desc} onChange={setDesc} size="text-[0.9375rem]" color="text-muted-foreground" leading="leading-relaxed" placeholder="Add a description..." as="p" />
```

| Prop | Type | Default | Description |
|---|---|---|---|
| `value` | `string` | required | Current value |
| `onChange` | `(value) => void` | required | Save handler |
| `placeholder` | `string?` | `"Empty"` | Placeholder when empty |
| `placeholderColor` | `string?` | `"text-muted-foreground/50"` | Tailwind class for placeholder color |
| `color` | `string?` | inherits | Tailwind text color class |
| `size` | `string?` | `"text-sm"` | Tailwind text-size class |
| `weight` | `string?` | `"font-normal"` | Tailwind font-weight class |
| `leading` | `string?` | — | Tailwind leading class |
| `tracking` | `string?` | — | Tailwind tracking class |
| `multiline` | `boolean` | `false` | Use textarea instead of input |
| `maxChars` | `number?` | — | Character limit |
| `as` | `"div"` / `"h1"` / `"p"` | `"div"` | Display-mode HTML tag |
| `editable` | `boolean` | `true` | When `false`, click-to-edit is disabled and cursor-text is removed |
| `className` | `string?` | — | Additional styling |

**Used in:** DecisionDetail (title), CommitmentDetail (title), InitiativeDetail (title, summary), ProjectDetail (title, description), SessionDetail (title)

### PageHeader / PageHeaderRow / PageHeaderGroup / HeaderBreadcrumb

`src/components/PageHeader.tsx`

Consistent page header layout injected into the App shell's sticky header area via the `usePageHeader` hook. `PageHeader` wraps rows, `PageHeaderRow` is a horizontal bar with `border-b`, `PageHeaderGroup` groups items with flex gap. Convention: Row 1 = title + tabs + actions, Row 2 = Filter + Display popovers.

`HeaderBreadcrumb` takes children and inserts `>` dividers with `mx-1.5` spacing between them. Used in all detail page headers for consistent breadcrumb navigation.

| Component | Props |
|---|---|
| `PageHeader` | `children: ReactNode` |
| `PageHeaderRow` | `children: ReactNode`, `secondary?: boolean` |
| `PageHeaderGroup` | `children?: ReactNode` |
| `HeaderBreadcrumb` | `children: ReactNode` |

**Used in:** every page

### DetailSidebar (SidebarSection)

`src/components/DetailSidebar.tsx`

Right-side detail panel for entity detail pages. Fixed-position aside, 288px wide, slides in/out with transition. `SidebarSection` is a collapsible section with title. Property rows inside use `PropertiesRow` with `stacked` layout.

| Component | Props |
|---|---|
| `SidebarSection` | `title: string`, `defaultOpen?: boolean` (default true), `children: ReactNode` |

**Used in:** InitiativeDetail, ProjectDetail

### PropertiesRow (+ PropertiesRow.Item)

`src/components/PropertiesRow.tsx`

Renders a group of field components in either inline (horizontal) or stacked (vertical) layout. Provides an `editable` flag via React context that child fields can read with the `usePropertiesEditable()` hook.

**Inline usage (detail page body):**
```tsx
<PropertiesRow title="Properties">
  <PropertiesRow.Item><StatusField value={status} /></PropertiesRow.Item>
  <PropertiesRow.Item><PersonField value={owner} /></PropertiesRow.Item>
</PropertiesRow>
```

**Stacked usage (sidebar):**
```tsx
<PropertiesRow stacked>
  <PropertiesRow.Item label="Status"><StatusField value={status} /></PropertiesRow.Item>
  <PropertiesRow.Item label="Owner"><PersonField value={owner} /></PropertiesRow.Item>
</PropertiesRow>
```

**Read-only usage:**
```tsx
<PropertiesRow title="Properties" editable={false}>
  ...fields inherit read-only via usePropertiesEditable()
</PropertiesRow>
```

| Prop | Type | Default | Description |
|---|---|---|---|
| `title` | `string?` | — | Label shown at start of row (inline mode only) |
| `stacked` | `boolean` | `false` | Vertical layout with labeled rows (for sidebars) |
| `editable` | `boolean` | `true` | Propagated via context to child fields |
| `className` | `string?` | — | Additional styling |

`PropertiesRow.Item` props:

| Prop | Type | Description |
|---|---|---|
| `label` | `string?` | Row label (only rendered in stacked mode) |
| `children` | `ReactNode` | Field content |

Exports `usePropertiesEditable()` hook for field components to read the inherited editable state.

**Used in:** DecisionDetail (inline), CommitmentDetail (inline), InitiativeDetail (inline + stacked), ProjectDetail (inline + stacked), SessionDetail (inline)

### EntityIcon

`src/components/EntityIcon.tsx`

Centralized icon map for all domain entities. Renders the canonical Lucide icon for a given entity type. Single source of truth — all entity icon references across the app go through this component.

```tsx
<EntityIcon type="decision" className="h-3.5 w-3.5" />
```

| Prop | Type | Default | Description |
|---|---|---|---|
| `type` | `EntityType` | required | Entity type to render icon for |
| `className` | `string?` | — | Size and style overrides (e.g. `"h-3 w-3"`) |

**Entity → Icon mapping:**

| Type | Lucide Icon |
|---|---|
| `decision` | `Split` |
| `commitment` | `Hexagon` |
| `session` | `CirclePlay` |
| `circle` | `SquareUserRound` |
| `initiative` | `Rocket` |
| `project` | `Box` |
| `inbox` | `Inbox` |
| `myItems` | `IterationCcw` |

Also exports the `EntityType` union type.

**Used in:** AppSidebar (all nav icons), ProjectsList (decision/commitment column headers + cells), InitiativeDetail (decision/commitment column headers + cells), SessionField (session pill icon)

### AppSidebar

`src/components/AppSidebar.tsx`

Main navigation sidebar. Uses shadcn `Sidebar*` primitives + Radix `Collapsible`. All entity icons use `EntityIcon` component. Structure:

- **Header** — workspace switcher (DropdownMenu with ChevronsUpDown). Lists workspaces the user belongs to; Check icon marks the active one. Switching navigates to `/`.
- **Top-level links** — Inbox, My Items
- **Workspace section** — Initiatives, Projects, Circles
- **Your Circles** — one collapsible per circle (filtered by active workspace) with sub-items:
  - Sessions (Previous / Current (if exists) / Upcoming shortcuts)
  - Decisions
  - Commitments

First circle is expanded by default. Active route is highlighted.

**Used in:** App shell (always visible)

---

## Data Display Components

### DecisionsTable

`src/components/DecisionsTable.tsx`

Reusable decisions table wrapping `DataTable`. Decision-specific columns: ref, statement, submitted (DateField with date + age), circle (CircleField pill), session link, owner/sponsor avatar, status badge. Supports column visibility toggling, combined status+owner column for compact views, drag-and-drop reorder, and click-to-open handler.

| Prop | Type | Default | Description |
|---|---|---|---|
| `decisions` | `Decision[]` | required | Decision data |
| `showCircle` | `boolean` | `true` | Show circle column |
| `showSession` | `boolean` | `false` | Show session column |
| `showSubmitted` | `boolean` | `true` | Show submitted column (date + age via DateField) |
| `showOwner` | `boolean` | `true` | Show owner column |
| `noDividers` | `boolean` | — | Remove row dividers |
| `onReorder` | `(from, to) => void` | — | Enable drag-and-drop |
| `onDecisionClick` | `(decision) => void` | — | Click handler (replaces Link) |
| `showSelect` | `boolean` | — | Show row selection checkboxes |
| `showDragHandle` | `boolean` | — | Show drag handle |
| `showHeader` | `boolean` | — | Show table header |
| `combinedStatusOwner` | `boolean` | `false` | Merge status + owner into single right-aligned column |
| `personColumn` | `"owner"` / `"sponsor"` | `"owner"` | Which person to show in person column |

**Used in:** CircleDecisions, SessionDetail

### CommitmentsTable

`src/components/CommitmentsTable.tsx`

Reusable commitments table wrapping `DataTable`. Commitment-specific columns: ref, outcome, decision ref, circle, owner avatar, due date, status badge.

| Prop | Type | Default | Description |
|---|---|---|---|
| `commitments` | `Commitment[]` | required | Commitment data |
| `showOwner` | `boolean` | `true` | Show owner column |
| `showCircle` | `boolean` | `true` | Show circle column |
| `showDecision` | `boolean` | `true` | Show decision column |
| `noDividers` | `boolean` | — | Remove row dividers |
| `showSelect` | `boolean` | — | Show row selection checkboxes |
| `showHeader` | `boolean` | — | Show table header |
| `combinedStatusOwner` | `boolean` | `false` | Merge decision ref + owner into single column |

**Used in:** CircleCommitments, SessionDetail

### EntityList

`src/components/EntityList.tsx`

Generic compact list for rendering entity rows with left/right content slots. Each item can optionally link to a detail page or trigger a click handler. Used where a full DataTable is overkill.

| Prop | Type | Default | Description |
|---|---|---|---|
| `items` | `EntityListItem[]` | required | List items |
| `emptyMessage` | `string` | `"None yet."` | Empty state text |
| `bordered` | `boolean` | `false` | Wrap in border + rounded container |

`EntityListItem` shape:

| Field | Type | Description |
|---|---|---|
| `id` | `string` | Unique key |
| `left` | `ReactNode` | Left content (e.g. ref + title) |
| `right` | `ReactNode?` | Right content (e.g. status + avatar) |
| `href` | `string?` | Navigation target |
| `onClick` | `() => void?` | Click handler (alternative to href) |

**Used in:** Inbox, MyItems (decisions, commitments), ProjectDetail (decisions, commitments), DecisionDetail (linked commitments)

### ChangeLog

`src/components/ChangeLog.tsx`

Activity timeline feed. Vertical line on the left with per-entry icon nodes varying by action type. Each entry shows icon/avatar, person name (font-medium), action description, optional bold from/to values, and "Xd ago" timestamp.

| Prop | Type | Description |
|---|---|---|
| `entries` | `ChangeLogEntry[]` | Activity entries |

**Used in:** DecisionDetail (activity section), CommitmentDetail (activity section), SessionDetail (activity section)

---

## Field Components

Reusable field-type components with a consistent pattern: read-only by default, optionally editable via popover. Used in tables, headers, sidebars, and standalone contexts.

### DateField

`src/components/DateField.tsx`

Contextual date display with tooltip. Shows relative text when ≤7 days ago ("today", "yesterday", "3 days ago"), absolute long format otherwise ("Feb 10, 2026"). Supports three display modes and an optional calendar picker for editable dates.

| Prop | Type | Default | Description |
|---|---|---|---|
| `value` | `string \| Date` | required | Date value (ISO string or Date object) |
| `display` | `"date"` / `"age"` / `"both"` | `"date"` | Display mode — "both" shows "Feb 10, 2026 · 5 days" |
| `onChange` | `(date: Date) => void` | — | When provided, renders a calendar popover for date picking |
| `prefix` | `string?` | — | Text prefix (e.g. "Due") |
| `className` | `string?` | — | Additional styling |

**Used in:** DecisionsTable (submitted column, `display="both"`), Inbox (EntityList, `display="both"`), MyItems (EntityList, `display="both"`), DecisionDetail (submitted date), SessionDetail (session date, drawer age), CommitmentDetail (due date)

### PersonField

`src/components/PersonField.tsx`

Avatar-based person display with nullable support. Read-only shows avatar + optional name. Editable shows avatar that opens a popover picker with the full people list. When `value` is `null`, displays a muted placeholder icon (and "Add {title}" text when `showName` is true). Non-editable null state shows the icon with "None" text.

| Prop | Type | Default | Description |
|---|---|---|---|
| `value` | `string \| null` | required | Current person (name or initials), or `null` for unassigned |
| `resolveBy` | `"name"` / `"initials"` | `"name"` | How to resolve `value` to a person |
| `editable` | `boolean` | `true` | Enable click-to-pick mode |
| `showName` | `boolean` | `false` | Show person name next to avatar |
| `title` | `string?` | — | Field label used in placeholder ("Add {title}") and clear option ("No {title}") |
| `onSelect` | `(person \| null) => void` | — | Selection handler; passes `null` when "No {title}" is chosen |
| `workspaceId` | `string?` | — | Scope picker dropdown to people in this workspace |
| `className` | `string?` | — | Additional styling |

When `title` is provided and the field is editable, the dropdown prepends a "No {title}" option that clears the selection.

**Used in:** DecisionsTable (owner/sponsor cell), CommitmentsTable (owner cell), DecisionDetail (sidebar: requested by, sponsor, owner), InitiativesList (owner cell), InitiativeDetail (project table), ProjectsList (owner cell), SessionDetail (chair)

### StatusField

`src/components/StatusField.tsx`

Config-driven status display with icon + text. Supports four entity types (decision, commitment, initiative, session) via a `type` prop. Options are derived from an internal config map, with an optional `options` prop to filter and order the dropdown choices. Read-only renders a `<span>` with colored icon + muted label. Editable renders a `<button>` trigger (matching PersonField style: `rounded px-1.5 py-0.5 hover:bg-muted`) that opens a popover dropdown with all status options for that type.

Also exports a `getStatusConfig(type, value)` helper for external icon/color lookup, and a `StatusType` union type.

| Prop | Type | Default | Description |
|---|---|---|---|
| `type` | `StatusType` | required | Entity type: `"decision"`, `"commitment"`, `"initiative"`, or `"session"` |
| `value` | `string` | required | Current status value (e.g. `"Draft"`, `"Active"`, `"active"`) |
| `editable` | `boolean` | `false` | Enable click-to-pick mode |
| `onSelect` | `(value: string) => void` | — | Selection handler (returns the config map key) |
| `options` | `string[]?` | — | Filter and order dropdown choices (preserves caller order) |
| `className` | `string?` | — | Additional styling |

**Config map:**

| Type | Status | Icon | Color |
|---|---|---|---|
| decision | Draft | `CircleDashed` | `text-muted-foreground` |
| decision | Requested | `CircleHelp` | `text-amber-600` |
| decision | Scheduled | `CircleChevronRight` | `text-blue-600` |
| decision | Taken | `CircleCheckBig` | `text-green-600` |
| decision | Rolled | `RotateCw` | `text-red-600` |
| decision | Superseded | `CircleSlash` | `text-muted-foreground` |
| commitment | Active | `CircleDot` | `text-blue-600` |
| commitment | Delivered | `CircleCheck` | `text-green-600` |
| commitment | Rolled | `RotateCw` | `text-red-600` |
| initiative | active | `CircleDot` | `text-blue-600` |
| initiative | planned | `Circle` | `text-muted-foreground` |
| initiative | completed | `CircleCheck` | `text-green-600` |
| session | Open | `Circle` | `text-blue-600` |
| session | Closed | `CircleCheck` | `text-green-600` |
| session | Cancelled | `CircleX` | `text-muted-foreground` |

Lowercase aliases (`draft`, `requested`, `scheduled`, `taken`, `rolled`, `active`, `delivered`, etc.) are supported for `ProjectDecisionStatus` / `ProjectCommitmentStatus` values.

**Used in:** DecisionsTable (status cell, combined statusOwner cell), CommitmentsTable (status cell), Inbox (EntityList), MyItems (EntityList), DecisionDetail (inline status), CommitmentDetail (inline status, linked decision), SessionDetail (properties, drawer decision status), InitiativeDetail (inline + sidebar status), ProjectDetail (EntityList items)

### SessionField

`src/components/SessionField.tsx`

Session pill display: `EntityIcon` session icon + `#number` + relative date. Renders as a `Link` when `circleSlug` is provided, otherwise a static `span`. Date is formatted as relative ("today", "yesterday", "3d ago", "in 2d") for ≤7 days, otherwise "DD Mon".

| Prop | Type | Default | Description |
|---|---|---|---|
| `number` | `number` | required | Session number |
| `date` | `string?` | — | Session date (ISO string, optional) |
| `circleSlug` | `string?` | — | Circle slug for link (omit for static display) |
| `className` | `string?` | — | Additional styling |

**Used in:** DecisionsTable (session cell)

### DecisionField

`src/components/DecisionField.tsx`

Decision entity pill: EntityIcon (decision) + ref label + statement (tooltip for full text). Renders as `Link` when `circleSlug` and `decisionSlug` are provided, otherwise `span`. Supports `inline` prop for pill styling.

| Prop | Type | Default | Description |
|---|---|---|---|
| `refLabel` | `string` | required | Decision ref (e.g. "D-1") |
| `statement` | `string` | required | Decision statement |
| `circleSlug` | `string?` | — | Circle slug for link |
| `decisionSlug` | `string?` | — | Decision slug for link |
| `inline` | `boolean` | `false` | Pill style (border, smaller text) |
| `className` | `string?` | — | Additional styling |

**Used in:** CommitmentsTable (decision column), CommitmentDetail (sidebar)

### CommitmentField

`src/components/CommitmentField.tsx`

Commitment entity pill: EntityIcon (commitment) + ref label + outcome (tooltip for full text). Same pattern as DecisionField.

| Prop | Type | Default | Description |
|---|---|---|---|
| `refLabel` | `string` | required | Commitment ref (e.g. "C-1") |
| `outcome` | `string` | required | Commitment outcome |
| `circleSlug` | `string?` | — | Circle slug for link |
| `commitmentSlug` | `string?` | — | Commitment slug for link |
| `inline` | `boolean` | `false` | Pill style |
| `className` | `string?` | — | Additional styling |

**Used in:** DecisionsTable (linked commitments)

### CircleField

`src/components/CircleField.tsx`

Circle display: colored circle icon + name. Renders as `Link` (to circle sessions page) by default; set `linked={false}` for static display. The icon is looked up from `lucide-react`'s `icons` record using the circle's `icon` field returned by the API.

| Prop | Type | Default | Description |
|---|---|---|---|
| `circle` | `Circle` | required | Circle object |
| `linked` | `boolean` | `true` | Render as link to circle sessions |
| `inline` | `boolean` | `false` | Pill style |
| `className` | `string?` | — | Additional styling |

**Used in:** DecisionsTable (circle column), Inbox (EntityList), MyItems (EntityList), DecisionDetail (properties), CommitmentDetail (properties, linked decision)

### InitiativeField

`src/components/InitiativeField.tsx`

Initiative display: colored icon (from initiative's `icon` + `iconColor`) + title. Renders as `Link` by default.

| Prop | Type | Default | Description |
|---|---|---|---|
| `initiative` | `Initiative` | required | Initiative object |
| `linked` | `boolean` | `true` | Render as link to initiative detail |
| `inline` | `boolean` | `false` | Pill style |
| `className` | `string?` | — | Additional styling |

**Used in:** ProjectDetail (properties)

### HealthField

`src/components/HealthField.tsx`

Health display with popover showing full update details. Accepts an `updateId` and looks up the Update entity. Shows colored icon (TrendingUp / TrendingUpDown / TrendingDown) + health label + "Xd ago" staleness. Click opens popover with author, date, and update content. Shows "No updates" with muted CircleDashed icon when no update exists.

| Prop | Type | Default | Description |
|---|---|---|---|
| `updateId` | `string \| null` | — | Update ID to look up |
| `inline` | `boolean` | `false` | Smaller text for compact contexts |

**Used in:** InitiativesList, InitiativeDetail (properties), ProjectsList, ProjectDetail (properties + sidebar)

### TargetDateField

`src/components/TargetDateField.tsx`

Flexible target date picker with granularity switching. Supports Day, Month, Quarter, Half-year, and Year granularity via tabs. Auto-detects granularity from current value (e.g. "Q1 2026" → Quarter, "Mar 2026" → Month). Renders a button trigger with CalendarDays icon that opens a popover with text input + granularity tabs + date grid. Supports clearing via XCircle button.

| Prop | Type | Default | Description |
|---|---|---|---|
| `value` | `string \| null` | — | Current value (e.g. "Q1 2026", "Mar 2026", "2026-03-15") |
| `onChange` | `(value: string \| null) => void` | — | Change handler; `null` when cleared |
| `placeholder` | `string?` | `"Set target date"` | Placeholder text when no value |
| `className` | `string?` | — | Additional styling |

**Used in:** InitiativeDetail (inline + sidebar properties)

### SectionHeading

`src/components/SectionHeading.tsx`

Section title with optional right-aligned action slot. Renders as a small heading with consistent spacing.

| Prop | Type | Description |
|---|---|---|
| `children` | `ReactNode` | Heading text |
| `action` | `ReactNode?` | Right-aligned action (e.g. button) |

**Used in:** ProjectDetail, DecisionDetail, CommitmentDetail, SessionDetail

---

## Interactive Components

### TextField

See [Layout Components > TextField](#textfield) above.

### PropertySelect

`src/components/PropertySelect.tsx`

Inline property picker. Clickable trigger opens a popover with options. Each option can have an icon. Checkmark on selected item.

| Prop | Type | Description |
|---|---|---|
| `value` | `string` | Current value |
| `options` | `{ value, label, icon? }[]` | Available options |
| `onSelect` | `(value) => void` | Selection handler |
| `triggerClassName` | `string?` | Custom trigger styling |

**Used in:** InitiativeDetail (target), ProjectDetail (owner)

### MarkdownEditor

`src/components/MarkdownEditor.tsx`

TipTap-based rich text editor with markdown serialization. BubbleMenu toolbar: bold, italic, strike, code, link, headings (H2/H3), lists, blockquote. Slash commands for block insertion.

| Prop | Type | Default | Description |
|---|---|---|---|
| `content` | `string` | required | Initial markdown content |
| `onChange` | `(markdown) => void` | — | Change handler |
| `placeholder` | `string?` | — | Muted placeholder text shown when editor is empty |
| `editable` | `boolean` | `true` | When `false`, editor is non-editable and BubbleMenu is hidden |

**Used in:** DecisionDetail (description, discussion, summary), CommitmentDetail (linked decision), InitiativeDetail (description), SessionDetail (meeting notes)

### Banner

`src/components/Banner.tsx`

Generic banner component with semantic variants and two placement modes. Replaces the old single-purpose `ReadOnlyBanner`.

**Variants** — each has a default icon and color scheme:

| Variant | Default Icon | Background | Text | Border (inline only) |
|---|---|---|---|---|
| `info` | `Info` | `bg-blue-50` | `text-blue-800` | `border-blue-200` |
| `success` | `CircleCheck` | `bg-green-50` | `text-green-800` | `border-green-200` |
| `warning` | `AlertTriangle` | `bg-amber-50` | `text-amber-800` | `border-amber-200` |
| `error` | `AlertTriangle` | `bg-red-50` | `text-red-800` | `border-red-200` |
| `muted` | `Lock` | `bg-muted` | `text-muted-foreground` | `border` |

**Placement modes** controlled by `inline` prop:
- `inline={false}` (default) — full-width, centered text, no border/rounding. For page-level banners above content (e.g. SessionDetail).
- `inline={true}` — `rounded-md border`, left-aligned. For content-level alerts (e.g. ProjectDetail rolled warning, CommitmentDetail status alerts).

Both modes share: `flex items-center gap-2 px-3 py-2 text-xs`, icon at `h-3.5 w-3.5 shrink-0`.

```tsx
{/* Page-level: session closed */}
<Banner variant="warning" icon={Lock}>This session is closed. Re-open it to make changes.</Banner>
{/* Page-level: session cancelled */}
<Banner variant="muted">This session was cancelled.</Banner>
{/* Inline: rolled commitments warning */}
<Banner variant="error" inline className="mb-4">
  Execution slipping — 3 rolled commitments. Consider rescoping or forcing a decision.
</Banner>
{/* Inline: at-risk commitment */}
<Banner variant="warning" inline className="mb-4">
  This commitment is at risk. The deadline is approaching and completion is uncertain.
</Banner>
```

| Prop | Type | Default | Description |
|---|---|---|---|
| `variant` | `"info" \| "success" \| "warning" \| "error" \| "muted"` | required | Semantic variant controlling colors and default icon |
| `children` | `ReactNode` | required | Banner message content |
| `icon` | `LucideIcon?` | — | Override the default icon for the variant |
| `inline` | `boolean` | `false` | `true` = rounded+bordered content-level alert; `false` = full-width page-level banner |
| `className` | `string?` | — | Additional styling |

**Used in:** SessionDetail (Closed/Cancelled lock banners), ProjectDetail (rolled commitments warning), CommitmentDetail (Rolled/At risk status alerts)

---

## UI Primitives (shadcn)

These are standard shadcn/ui components. Not documented individually here, but the notable ones:

| Primitive | Notable usage |
|---|---|
| `DataTable` | Base for DecisionsTable, CommitmentsTable, and direct use in InitiativesList, ProjectsList, SessionsList, InitiativeDetail |
| `Badge` | Session badges, misc labels (status badges replaced by `StatusField`) |
| `Avatar` | Person display throughout the app |
| `Button` | Actions, filters, toggles |
| `Checkbox` | DataTable (row selection) |
| `Popover` | Filter/Display dropdowns, PropertySelect, PersonField, icon picker |
| `Select` | Filter dropdowns (health, owner) |
| `Sidebar*` | AppSidebar |
| `Collapsible` | AppSidebar circle sections, DetailSidebar sections |
| `ScrollArea` | App shell main content area |

---

## Hooks

### usePageHeader

`src/hooks/usePageHeader.ts`

Allows pages to inject their header content into the App shell's sticky header via React Router's Outlet context. Accepts `pageTitle`, `headerContent` (JSX), and optional `breadcrumbs`.

**Used in:** every page

### useDebouncedSave

`src/hooks/useDebouncedSave.ts`

Debounces save calls for fields that fire onChange on every keystroke (e.g. MarkdownEditor / TipTap). Returns a debounced function that merges successive patches and flushes pending saves on unmount.

```tsx
const debouncedSave = useDebouncedSave(
  (patch) => updateDecision.mutate({ slug, ...patch }),
  800 // delay in ms (default)
)

// In MarkdownEditor onChange:
onChange={(v) => { set("description", v); debouncedSave({ description: v }) }}
```

| Param | Type | Default | Description |
|---|---|---|---|
| `saveFn` | `(patch: Record<string, unknown>) => void` | required | The mutation call to debounce |
| `delay` | `number` | `800` | Debounce delay in milliseconds |

**Behavior:**
- Successive calls within the delay window are merged (e.g. `{ description: "a" }` + `{ summary: "b" }` → `{ description: "a", summary: "b" }`)
- Pending saves are flushed on component unmount via `useEffect` cleanup
- Uses `useRef` internally to avoid stale closure issues

**Used in:** DecisionDetail (description, discussion, summary), CommitmentDetail (description), InitiativeDetail (description), SessionDetail (notes)

### useWorkspace

`src/lib/workspace-context.tsx`

Returns the active workspace context: `activeWorkspaceId`, `setActiveWorkspaceId`, `workspace` (current `Workspace` object), `workspaces` (all workspaces the user has access to), and `basePath` (workspace-prefixed URL base, e.g. `/w/mews`). Must be used within `WorkspaceProvider`.

**Used in:** AppSidebar, Inbox, MyItems, InitiativesList, ProjectsList, ProjectDetail, InitiativeDetail, CircleDecisions, CircleCommitments, SessionsList, SessionDetail, DecisionDetail, CommitmentDetail
